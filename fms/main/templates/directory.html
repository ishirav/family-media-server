{% extends "base.html" %}

{% load humanize %}

{% block main_content %}

    <div class="row">
        <div class="col-md-12">
            <h2>
                {{ parts|last }} 
                <span class="badge">{{ index.files|length|intcomma }} file{{ index.files|length|pluralize }}</span>
            </h2>
            <table id="directory" class="table table-hover">
<!-- 
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Size</th>
                        <th>Modified</th>
                    </tr>
                </thead>
 -->
                 <tbody>
                    {% if path %}
                        <tr>
                            <td>
                                <a href="..">
                                    <div class="image">
                                        <img src="/static/images/upload-256.png" height="60">
                                    </div> 
                                    go up
                                </a>
                            </td>
                            <td>&nbsp;</td>
                            <td>&nbsp;</td>
                        </tr>
                    {% endif %}
                    {% for name, info in sorted_dirs %}
                        <tr>
                            <td>
                                <a href="{{ name|urlencode }}/">
                                    <div class="image">
                                        <img src="/static/images/folder-256.png" height="60">
                                    </div>
                                    {{ name }}
                                </a>
                            </td>
                            <td>&nbsp;</td>
                            <td>&nbsp;</td>
                        </tr>
                    {% endfor %}
                    {% for name, info in sorted_files %}
                        {% spaceless %}
                            <tr>
                                <td>
                                    <a href="/media/{{ info.path|urlencode }}">
                                        <div class="image">
                                            {% if "image" in info.type %}
                                                <img src="{{ thumbor_server }}/unsafe/80x60/{{ info.path }}" width="80" height="60">
                                            {% endif %}
                                            {% if "video" in info.type %}
                                                <img src="/static/images/film-256.png" height="60">
                                            {% endif %}
                                        </div>
                                        {{ name }}
                                    </a>
                                </td>
                                <td>{{ info.size }}</td>
                                <td>{{ info.modified }}</td>
                            </tr>
                        {% endspaceless %}
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

{% endblock %}
